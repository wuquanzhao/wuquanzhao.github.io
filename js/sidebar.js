const activeTabClass="sidebar-nav-active",activePanelClass="sidebar-panel-active";function toggleTocNumber(){const t=document.querySelector(".sidebar-nav-toc"),c="#icon-list-ordered";t&&t.addEventListener("click",()=>{if(t.classList.contains(activeTabClass)){const e=t.querySelector("use");e.setAttribute("xlink:href",e.getAttribute("xlink:href")===c?"#icon-list-unordered":c),document.querySelectorAll(".toc-number").forEach(e=>{e.classList.toggle("hidden")})}})}function toggleSidebarNav(){document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.onclick=function(){this.classList.contains(activeTabClass)||(document.querySelector("."+activePanelClass).classList.remove(activePanelClass),document.querySelector("#"+this.dataset.target).classList.add(activePanelClass),document.querySelector("."+activeTabClass).classList.remove(activeTabClass),this.classList.add(activeTabClass))}})}function activateNavByIndex(t){if(!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode}}function listenSidebarTOC(){const i=document.querySelectorAll(".post-toc li");if(i.length){const o=[...i].map(e=>{const t=e.querySelector(".toc-link"),c=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo(0,c.offsetTop+1)}),c});!function n(a){a=Math.floor(a+1e4);let t=new IntersectionObserver((e,t)=>{var c=document.documentElement.scrollHeight+100;if(a<c)return t.disconnect(),void n(c);e=function(e){let t=0,c=e[t];if(0<c.boundingClientRect.top)return t=o.indexOf(c.target),0===t?0:t-1;for(;t<e.length;t++){if(!(e[t].boundingClientRect.top<=0))return o.indexOf(c.target);c=e[t]}return o.indexOf(c.target)}(e),activateNavByIndex(i[e])},{rootMargin:a+"px 0px -100% 0px",threshold:0});o.forEach(e=>{e&&t.observe(e)})}(document.documentElement.scrollHeight)}}function initSidebar(){toggleTocNumber(),toggleSidebarNav(),listenSidebarTOC()}document.addEventListener("DOMContentLoaded",initSidebar),document.addEventListener("pjax:success",initSidebar);